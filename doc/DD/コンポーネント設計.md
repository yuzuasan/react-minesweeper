### 2.1 コンポーネント設計方針

- 機能単位・責務単位でコンポーネントを分割する
- state は可能な限り上位コンポーネントで管理する
- 子コンポーネントは表示とイベント通知に専念する
- 再利用性よりも可読性・学習しやすさを優先する

---

### 2.2 コンポーネント構成図（概要）

```

App
├─ Header
│   ├─ MineCounter
│   ├─ Timer
│   └─ RestartButton
├─ GameBoard
│   └─ Cell
├─ DifficultySelector
└─ HighScoreDialog

```

---

### 2.3 各コンポーネントの役割

---

#### App（ルートコンポーネント）

**役割**
- アプリ全体の state 管理
- ゲーム初期化・ロジック呼び出し
- 各画面・ダイアログの制御

**主な state**
- board
- gameStatus
- difficulty
- remainingMines
- elapsedTime

**主な責務**
- ゲーム初期化処理の呼び出し
- マス開放・旗操作のハンドリング
- クリア／ゲームオーバー判定
- ハイスコア更新処理

---

#### Header

**役割**
- ゲーム情報および操作 UI の表示領域

**表示内容**
- 残り地雷数
- 経過時間
- リスタートボタン

---

##### MineCounter

**役割**
- 残り地雷数を表示する

**props**
- remainingMines: number

---

##### Timer

**役割**
- 経過時間を表示する

**props**
- elapsedTime: number

---

##### RestartButton

**役割**
- ゲームを初期状態に戻す操作を提供する

**仕様**
- クリック時にゲーム初期化処理を実行する
- クリア後・ゲームオーバー後・プレイ中のいずれでも使用可能とする

**props**
- onRestart(): void

---

#### GameBoard

**役割**
- 盤面全体の表示
- マス操作イベントの受付

**props**
- board: Board
- gameStatus: GameStatus
- onOpenCell(x: number, y: number): void
- onToggleFlag(x: number, y: number): void

**責務**
- Cell コンポーネントの配置（グリッド表示）
- ゲーム終了時は操作を無効化する

---

#### Cell

**役割**
- 単一マスの表示と操作受付

**props**
- cell: Cell
- gameStatus: GameStatus
- onOpen(): void
- onToggleFlag(): void

**表示仕様**
- 未オープン：通常表示
- オープン：
  - 地雷：地雷アイコン
  - 非地雷：周囲地雷数を表示
- 旗あり：旗アイコン表示

---

#### DifficultySelector

**役割**
- 難易度選択 UI

**表示内容**
- 初級／中級／上級／カスタム
- カスタム設定入力欄

**props**
- onSelectDifficulty(setting: DifficultySetting): void

---

#### HighScoreDialog

**役割**
- ハイスコア表示 UI

**表示内容**
- 難易度ごとの最短クリアタイム

**props**
- scores: HighScoreData
- onClose(): void

---

### 2.4 コンポーネント間のデータフロー

```

App
├─ state 管理
├─ ロジック実行
│
├─ Header
│   ├─ remainingMines
│   ├─ elapsedTime
│   └─ onRestart
│
├─ GameBoard
│   └─ Cell
│       ├─ 表示のみ
│       └─ イベント通知
│
└─ DifficultySelector / HighScoreDialog

```

---

### 2.5 設計上のポイント

- リスタート操作を明示的なコンポーネントとして分離
- ゲーム初期化処理をどこからでも呼び出せる構造
- App にロジックを集中させ、状態遷移を追いやすくする
- Cell は極力「表示専用コンポーネント」とする
